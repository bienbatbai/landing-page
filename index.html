<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Redirecting…</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
html,body{
  margin:0;height:100%;
  background:#000;color:#fff;
  display:flex;align-items:center;justify-content:center;
  font-family:Arial
}
.spinner{
  width:42px;height:42px;border-radius:50%;
  border:4px solid rgba(255,255,255,.2);
  border-top-color:#ff0033;
  animation:spin .8s linear infinite
}
@keyframes spin{to{transform:rotate(360deg)}}
</style>
</head>
<body>

<div class="spinner"></div>

<script>
/* ===== PARAMS ===== */
const p = new URLSearchParams(location.search);
const zone  = p.get("zone") || "unknown";
const video = p.get("v") || "";

/* ===== BUILD YOUTUBE URL ===== */
let yt = "";

// nếu là link youtube đầy đủ
if(video.startsWith("http")){
  yt = video;
}
// nếu là ID video
else if(video.length >= 6){
  yt = "https://www.youtube.com/watch?v=" + video;
}
// fallback (KHÔNG BAO GIỜ CHẾT)
else{
  yt = "https://www.youtube.com/";
}

/* ===== SEND ZONE → GOOGLE SHEET ===== */
fetch(
  "https://script.google.com/macros/s/AKfycbzlIAC8YgiLuOUQHyiKpY98rBT9XRW5L1FlUAN-qSc4_qT18ytNeIXAxRNHyHXc4_6g/exec"
  + "?zone=" + encodeURIComponent(zone)
  + "&video=" + encodeURIComponent(video)
  + "&ua=" + encodeURIComponent(navigator.userAgent)
).catch(()=>{});

/* ===== REDIRECT ===== */
setTimeout(()=>{
  location.replace(yt);
}, 2000);
</script>

</body>
</html>

